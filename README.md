# API Generation ðŸ¤–

This project uses [roslyn](https://github.com/dotnet/roslyn) to create an API from open api specification.
View a post on the idea behind this project [here](https://www.maisiesadler.co.uk/api-generation/blog).

This ensures that the application is always returning models that match the defined API specification.

The easiest way to describe what the project does is through an example of what is generated:
- [Controller](example/generated/ApiTodoController.cs) created for [path](./definition.json#L8)
- [Model](example/generated/models/ToDoItem.cs) created for [schema](./definition.json#L56)
- [Interface](example/generated/interactors/IGetApiTodoInteractor.cs) describing each [route](./definition.json#L8)

This can then be implemented in the project with any custom logic, [e.g.](example/implementations/GetApiTodoInteractor.cs).

The above examples are from the [example project](./example) generated by the [definition](./definition.json) file in the root of the project. 
All of the generated files are in the [generated](./example/generated) folder in that project, this folder is deleted and recreated on each run.

Running `dotnet run --project example` and navigating to `http://localhost:5009/api/todo` produces the following response:

<img src="./images/example-project-response.png" alt="Example Response" height="80" />

## Usage

There are two available projects [OpenApiSpecGeneration.ApiGeneration](./src/OpenApiSpecGeneration.ApiGeneration) and [OpenApiSpecGeneration.Console](./src/OpenApiSpecGeneration.Console).

The first can be used as a package (soon) and the second is a console app that takes an input file and produces c# files to the gievn output directory. See the project folder for more details on usage.

## Contributing

## What's supported

### Reading open api specs

The [console app](src/OpenApiSpecGeneration.Console) takes an input json openapi spec and outputs C# files to the given output directory.

Our API specs are defined in YAML, since this is not easily parsed in dotnet I have created a tool [yamltojson](./yamltojson) that takes a YAML file and outputs a JSON file which can then be used by the console app.
